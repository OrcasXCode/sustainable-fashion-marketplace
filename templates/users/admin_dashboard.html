{% extends 'base.html' %}

{% block title %}Admin Dashboard - Sustainable Fashion{% endblock %}

{% block content %}
<section class="dashboard-header">
    <div class="container">
        <h1 style="font-size: 2.5rem; font-weight: 700;">Admin Dashboard</h1>
        <p style="font-size: 1.1rem; color: #525252;">Marketplace Overview</p>
    </div>
</section>

<section class="container mt-4">
    <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 1.5rem;">Platform Statistics</h2>
    
    <h3 style="font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem;">Users</h3>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_users }}</div>
            <div class="stat-label">Total Users</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_buyers }}</div>
            <div class="stat-label">Buyers</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_sellers }}</div>
            <div class="stat-label">Sellers</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.verified_sellers }}</div>
            <div class="stat-label">Verified Sellers</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.pending_sellers }}</div>
            <div class="stat-label">Pending Sellers</div>
        </div>
    </div>
    
    <h3 style="font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem;">Products</h3>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_products }}</div>
            <div class="stat-label">Total Products</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.approved_products }}</div>
            <div class="stat-label">Approved</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.pending_products }}</div>
            <div class="stat-label">Pending Approval</div>
        </div>
    </div>
    
    <h3 style="font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem;">Orders</h3>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_orders }}</div>
            <div class="stat-label">Total Orders</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.pending_orders }}</div>
            <div class="stat-label">Pending</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.delivered_orders }}</div>
            <div class="stat-label">Delivered</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.cancelled_orders }}</div>
            <div class="stat-label">Cancelled</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.returned_orders }}</div>
            <div class="stat-label">Returned</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">₹{{ stats.total_revenue }}</div>
            <div class="stat-label">Total Revenue</div>
        </div>
    </div>
</section>

<section class="container mt-4 mb-4">
    <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 1.5rem;">Pending Actions</h2>
    
    {% if pending_sellers %}
        <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem;">Sellers Awaiting Verification</h3>
        <div class="table" style="overflow-x: auto; margin-bottom: 2rem;">
            <table class="table">
                <thead>
                    <tr>
                        <th>Brand Name</th>
                        <th>User</th>
                        <th>Registered</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for seller in pending_sellers %}
                        <tr>
                            <td>{{ seller.brand_name }}</td>
                            <td>{{ seller.user.username }} ({{ seller.user.email }})</td>
                            <td>{{ seller.created_at|date:"M d, Y" }}</td>
                            <td>
                                <a href="{% url 'admin:users_sellerprofile_change' seller.id %}" class="btn-black" style="padding: 0.5rem 1rem;">Review</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
    
    {% if pending_products %}
        <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem;">Products Awaiting Approval</h3>
        <div class="table" style="overflow-x: auto; margin-bottom: 2rem;">
            <table class="table">
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>Seller</th>
                        <th>Price</th>
                        <th>Listed</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for product in pending_products %}
                        <tr>
                            <td>{{ product.name }}</td>
                            <td>{{ product.seller.brand_name }}</td>
                            <td>₹{{ product.price }}</td>
                            <td>{{ product.created_at|date:"M d, Y" }}</td>
                            <td>
                                <a href="{% url 'admin:products_product_change' product.id %}" class="btn-black" style="padding: 0.5rem 1rem;">Review</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
    
    {% if not pending_sellers and not pending_products %}
        <p style="color: #737373; text-align: center; padding: 2rem;">No pending actions. Everything is up to date!</p>
    {% endif %}
</section>
{% endblock %}
